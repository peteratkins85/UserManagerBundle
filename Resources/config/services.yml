parameters:
    user_provider: Cms\UserManagerBundle\Security\Authentication\Provider\UserProvider
    user_entity: Cms\UserManagerBundle\Entity\User
    user_entity_repository: Cms\UserManagerBundle\Entity\Repository\UserRepository
    user_factory: Cms\UserManagerBundle\Entity\Factory\UserFactory
    security_controller: Cms\ProductManagerBundle\Controller\IndexController
    user_event_subscriber: Cms\UserManagerBundle\EventListeners\UserEventSubscriber

services:
    user:
        class: "%user_entity%"
    cms_user_provider:
        class: "%user_provider%"
        arguments: ["@user_repository" , "@doctrine.orm.entity_manager"]
    user_repository:
        class: "%user_entity_repository%"
        factory: [ '@doctrine.orm.default_entity_manager',  getRepository]
        arguments:
                - "UserManagerBundle:User"
    login_authenticator:
        class:     Cms\UserManagerBundle\Security\LoginAuthenticator
        arguments: ["@security.encoder_factory", "@doctrine.orm.entity_manager","@service_container"]
    user.security.authentication.provider:
        class: Cms\UserManagerBundle\Security\Authentication\Provider\AuthenticationProvider
        arguments:
            - '' # User Provider
            - '@security.user_checker'
            - '' # Provider-shared Key
            - '@security.encoder_factory'
        public: false
    user_event_subscriber:
        class: "%user_event_subscriber%"
        arguments: ["@doctrine.orm.entity_manager", "@service_container"]
        tags:
           - { name: kernel.event_subscriber }

#    user.security.authentication.listener:
#        class: AppBundle\Security\Firewall\WsseListener
#        arguments: ['@security.token_storage', '@security.authentication.manager']
#        public: false
